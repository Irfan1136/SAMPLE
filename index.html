<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sevagan - Blood Donor App</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }

    body {
      background-color: #f0f8ff;
      color: #0f172a;
    }

    /* Navbar */
    .navbar {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1100;
      box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
    }

    .brand {
      font-size: 1.8rem;
      font-weight: bold;
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
    }

    .nav-links a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      padding: 8px 16px;
      border-radius: 20px;
      position: relative;
      overflow: hidden;
      font-size: 1.08rem;
      letter-spacing: 0.5px;
      margin: 0 2px;
    }

    .nav-links a.active, .nav-links a[aria-current="page"] {
      background: #fff;
      color: #dc2626;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(220,38,38,0.08);
      border-bottom: 3px solid #dc2626;
    }
    .nav-links a.active:hover, .nav-links a[aria-current="page"]:hover {
      box-shadow: 0 6px 20px rgba(220,38,38,0.18);
      border-bottom: 3px solid #dc2626;
      color: #dc2626;
      background: #fff;
      transform: scale(1.12);
    }
    /* Make .active look exactly like hover for strong highlight */
    .nav-links a.active, .nav-links a.active:hover {
      background: #fff;
      color: #dc2626;
      font-weight: bold;
      box-shadow: 0 6px 20px rgba(220,38,38,0.18);
      border-bottom: 3px solid #dc2626;
      transform: scale(1.12);
    }

    .nav-links a:hover {
      background-color: white;
      color: #dc2626;
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .nav-links a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .nav-links a:hover::before {
      left: 100%;
    }

    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      background: none;
      border: none;
      padding: 5px;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background-color: white;
      margin: 3px 0;
      transition: 0.3s;
    }



    /* Responsive Design */
    @media (max-width: 768px) {
      .hamburger {
        display: flex;
      }

      .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%);
        flex-direction: column;
        padding: 1rem;
        gap: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        align-items: center;
        text-align: center;
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links a {
        padding: 10px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        width: 100%;
        border-radius: 12px;
        transition: background 0.3s, color 0.3s;
      }

      .nav-links a:last-child {
        border-bottom: none;
      }

      .nav-links a:hover {
        background: #fff;
        color: #dc2626;
        border-radius: 12px;
      }

      .nav-links a.active, .nav-links a[aria-current="page"] {
        background: #fff;
        color: #dc2626;
        font-weight: bold;
        border-bottom: none;
      }
      .nav-links a:hover {
        background: #fff;
        color: #dc2626;
        border-radius: 12px;
      }
    }

    /* Hero Section */
    .hero {
      padding: 80px 20px;
      text-align: center;
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 25%, #991b1b 50%, #7f1d1d 75%, #dc2626 100%);
      color: white;
      position: relative;
      overflow: hidden;
      margin-top: 90px;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="hearts" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M10 6.5c-1.5-1.5-3.5-2-5.5-1.5s-3 2-3 4c0 2 1.5 3.5 3 5l5.5 5.5 5.5-5.5c1.5-1.5 3-3 3-5s-1-3-3-4-4-1-5.5 1.5z" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23hearts)"/></svg>');
      opacity: 0.3;
    }

    .hero > * {
      position: relative;
      z-index: 1;
    }

    .hero h1 {
      font-size: 3.5rem;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .hero p {
      font-size: 1.2rem;
      max-width: 700px;
      margin: 0 auto 30px;
    }

    .hero button {
      background: #fff;
      color: #dc2626;
      padding: 15px 30px;
      font-size: 1.1rem;
      font-weight: bold;
      border: 2px solid #dc2626;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }

    .hero button:hover {
      background: linear-gradient(135deg, #b91c1c, #991b1b);
      color: #fff;
      border-color: #fff;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    /* Form Section */
    .form-section {
      max-width: 600px;
      margin: 40px auto;
      padding: 40px;
      border-radius: 20px;
      background: linear-gradient(135deg, #ffffff 0%, #fef2f2 100%);
      box-shadow: 0 20px 40px rgba(220, 38, 38, 0.15);
      display: none;
      border: 2px solid rgba(220, 38, 38, 0.1);
      position: relative;
      overflow: hidden;
    }

    .form-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #dc2626, #b91c1c, #991b1b, #dc2626);
    }

    .form-section h2 {
      margin-bottom: 30px;
      text-align: center;
      color: #dc2626;
      font-size: 2.2rem;
      font-weight: bold;
      text-shadow: 0 2px 4px rgba(220, 38, 38, 0.2);
    }

    .form-group {
      position: relative;
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #374151;
      font-weight: 600;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 15px 20px;
      font-size: 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      background: white;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #dc2626;
      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
      transform: translateY(-2px);
    }

    .form-group input:hover,
    .form-group select:hover {
      border-color: #dc2626;
      transform: translateY(-1px);
    }

    .submit-btn {
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      color: white;
      padding: 15px 30px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.1rem;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
      position: relative;
      overflow: hidden;
    }

    .submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .submit-btn:hover {
      background: linear-gradient(135deg, #b91c1c, #991b1b);
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
    }

    .submit-btn:hover::before {
      left: 100%;
    }

    .form-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .form-header .icon {
      font-size: 3rem;
      margin-bottom: 15px;
      display: block;
    }

    .form-header p {
      color: #6b7280;
      font-size: 1.1rem;
      margin-top: 10px;
    }

    /* About Section */
    .about-section {
      padding: 60px 20px;
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      color: #1f2937;
    }

    .about-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .about-header {
      text-align: center;
      margin-bottom: 50px;
    }

    .about-header h2 {
      font-size: 2.5rem;
      color: #dc2626;
      margin-bottom: 20px;
    }

    .about-header p {
      font-size: 1.2rem;
      color: #6b7280;
      max-width: 600px;
      margin: 0 auto;
    }

    .about-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-bottom: 40px;
    }

    .about-text {
      line-height: 1.8;
    }

    .about-text h3 {
      color: #dc2626;
      font-size: 1.5rem;
      margin-bottom: 15px;
    }

    .about-text p {
      margin-bottom: 20px;
      color: #4b5563;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .feature-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-left: 4px solid #dc2626;
    }

    .feature-card h4 {
      color: #dc2626;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .feature-card p {
      color: #6b7280;
      font-size: 0.9rem;
    }

    .mission-box {
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      color: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      margin: 30px 0;
    }

    .mission-box h3 {
      font-size: 1.8rem;
      margin-bottom: 15px;
    }

    .mission-box p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .why-sevagan {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin-top: 30px;
    }

    .why-sevagan h3 {
      color: #dc2626;
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.8rem;
    }

    .benefits-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .benefit-item {
      text-align: center;
      padding: 15px;
      background: #fef2f2;
      border-radius: 8px;
    }

    .benefit-item strong {
      color: #dc2626;
      display: block;
      margin-bottom: 5px;
    }

    /* Responsive Design for About Section */
    @media (max-width: 768px) {
      .about-content {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .about-header h2 {
        font-size: 2rem;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }

      .benefits-list {
        grid-template-columns: 1fr;
      }
    }
    .floating-group {
      position: relative;
      width: 90%;
      margin: 0 auto;
    }
    .floating-input, .floating-select {
      width: 100%;
      padding: 14px 10px 8px 10px;
      border-radius: 7px;
      border: 1px solid #ddd;
      font-size: 1rem;
      background: #fff;
      outline: none;
      transition: border-color 0.2s;
      color: #111;
    }
    .floating-input:focus, .floating-select:focus {
      border-color: #dc2626;
    }
    .floating-label {
      position: absolute;
      left: 12px;
      top: 14px;
      color: #991b1b;
      font-size: 0.92em;
      background: #fff;
      padding: 0 4px;
      pointer-events: none;
      transition: 0.2s cubic-bezier(.4,0,.2,1);
      opacity: 0.85;
    }
    .floating-input:focus + .floating-label,
    .floating-input:not(:placeholder-shown) + .floating-label,
    .floating-select:focus + .floating-label,
    .floating-select.filled + .floating-label {
      top: -10px;
      left: 8px;
      font-size: 0.78em;
      color: #dc2626;
      background: #fff;
      opacity: 1;
    }
    .floating-input:disabled + .floating-label {
      color: #bbb;
    }
    .floating-label.always-float {
      top: -10px !important;
      left: 8px !important;
      font-size: 0.78em !important;
      color: #dc2626 !important;
      background: #fff;
      opacity: 1;
    }
    /* Force select and option text color to black for country and city dropdowns */
    #profileCountryCode, #profileCity, #profileCountryCode option, #profileCity option {
      color: #111 !important;
    }
    /* Force select and option text color to black for blood group and gender dropdowns */
    #profileBlood, #profileGender, #profileBlood option, #profileGender option {
      color: #111 !important;
    }
    /* Note: Unicode flag emojis may not display in <select> dropdowns on all browsers/OS. For full flag support, use a custom dropdown component. */
    .input-suffix-wrapper {
      position: relative;
      width: 100%;
      max-width: 100%;
    }
    .floating-input.with-suffix {
      padding-right: 90px;
      box-sizing: border-box;
      width: 100%;
      max-width: 100%;
    }
    .input-suffix {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #dc2626;
      pointer-events: none;
      font-size: 1em;
      background: white;
      padding-left: 2px;
      white-space: nowrap;
    }
    #profileEditIcon {
      cursor: pointer;
      position: absolute;
      top: 18px;
      left: 18px;
      background: #fff;
      border: 1.5px solid #dc2626;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: #dc2626;
      box-shadow: 0 2px 8px rgba(220,38,38,0.10);
      transition: color 0.2s, background 0.2s, box-shadow 0.2s, transform 0.2s;
      z-index: 2;
    }
    #profileEditIcon svg {
      width: 22px;
      height: 22px;
      fill: currentColor;
      transition: fill 0.2s;
    }
    #profileEditIcon:hover, #profileEditIcon:focus {
      color: #fff;
      background: #dc2626;
      border-color: #991b1b;
      box-shadow: 0 4px 16px rgba(220,38,38,0.18);
      transform: scale(1.18) rotate(-4deg);
    }
    #profileEditIcon:hover svg, #profileEditIcon:focus svg {
      fill: #fff;
    }
    #profileCancelIcon {
      transition: color 0.2s, transform 0.2s, box-shadow 0.2s, background 0.2s;
      cursor: pointer;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      background: #fff;
      border: 1.5px solid #dc2626;
      position: absolute;
      top: 18px;
      right: 18px;
    }
    #profileCancelIcon svg {
      width: 22px;
      height: 22px;
      fill: #dc2626;
      transition: fill 0.2s;
    }
    #profileCancelIcon:hover, #profileCancelIcon:focus {
      color: #fff !important;
      background: #dc2626 !important;
      border-color: #991b1b;
      transform: scale(1.18) rotate(-4deg);
      box-shadow: 0 4px 16px rgba(220,38,38,0.18);
    }
    #profileCancelIcon:hover svg, #profileCancelIcon:focus svg {
      fill: #fff !important;
    }
    /* Add or replace the following CSS in the <style> section */
    #profileAvatarContainer { position: relative; }
    #profileEditIcon {
      position: absolute;
      top: 4px;
      left: 4px;
      width: 36px;
      height: 36px;
      background: #fff;
      border: 2px solid #dc2626;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #dc2626;
      box-shadow: 0 2px 8px rgba(220,38,38,0.18);
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.2s;
      z-index: 2;
      padding: 0;
    }
    #profileEditIcon svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
      transition: fill 0.2s;
    }
    #profileEditIcon:hover, #profileEditIcon:focus {
      background: #dc2626;
      color: #fff;
      box-shadow: 0 4px 16px rgba(220,38,38,0.28);
      transform: scale(1.12);
    }
    #profileEditIcon:hover svg, #profileEditIcon:focus svg {
      fill: #fff;
    }
    /* Add this CSS to the <style> section */
    .avatar-edit-wrapper {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      width: 100%;
      margin-bottom: 18px;
    }
    #profileEditIcon {
      position: absolute;
      top: -14px;
      left: -14px;
      width: 36px;
      height: 36px;
      background: #fff;
      border: 2px solid #dc2626;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #dc2626;
      box-shadow: 0 2px 8px rgba(220,38,38,0.18);
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.2s;
      z-index: 3;
      padding: 0;
    }
    #profileEditIcon svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
      transition: fill 0.2s;
    }
    #profileEditIcon:hover, #profileEditIcon:focus {
      background: #dc2626;
      color: #fff;
      box-shadow: 0 4px 16px rgba(220,38,38,0.28);
      transform: scale(1.12);
    }
    #profileEditIcon:hover svg, #profileEditIcon:focus svg {
      fill: #fff;
    }
    /* Ensure only one #profileEditIcon style and correct parent positioning */
    #profileModal > div[style*='background:linear-gradient'] {
      position: relative !important;
    }
    #profileEditIcon {
      position: absolute;
      top: 18px;
      left: 18px;
      width: 36px;
      height: 36px;
      background: #fff;
      border: 2px solid #dc2626;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #dc2626;
      box-shadow: 0 2px 8px rgba(220,38,38,0.18);
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.2s;
      z-index: 3;
      padding: 0;
    }
    #profileEditIcon svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
      transition: fill 0.2s;
    }
    #profileEditIcon:hover, #profileEditIcon:focus {
      background: #dc2626;
      color: #fff;
      box-shadow: 0 4px 16px rgba(220,38,38,0.28);
      transform: scale(1.12);
    }
    #profileEditIcon:hover svg, #profileEditIcon:focus svg {
      fill: #fff;
    }
  </style>
  <script>
    function toggleFloatLabel(el) {
      if (el.value) {
        el.classList.add('filled');
      } else {
        el.classList.remove('filled');
      }
    }
  </script>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="brand">Sevagan</div>
    <button class="hamburger" onclick="toggleMenu()">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <div class="nav-links" id="navLinks">
      <a href="javascript:void(0)" onclick="scrollToSection('home')" title="Home" data-section="home">Home</a>
      <a href="javascript:void(0)" onclick="scrollToSection('formSection')" title="Need Blood" data-section="formSection">Need Blood</a>
      <a href="javascript:void(0)" onclick="scrollToSection('donate')" title="Donate Blood" data-section="donate">Donate Blood</a>
      <a href="javascript:void(0)" onclick="scrollToSection('about')" title="About" data-section="about">About</a>
      <a href="javascript:void(0)" onclick="showProfileModal()" title="Profile" data-section="profile">Profile</a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <h1>Be a Hero. Donate Blood.</h1>
    <p>Connect with life-savers and help save lives through Sevagan, the easiest blood donation platform.</p>
    <button class="hero-btn" onclick="showForm()">Need Blood</button>
  </section>

  <!-- Form Section -->
  <section id="formSection" class="form-section" style="display: none;">
    <div class="form-header">
      <span class="icon">ğŸ©¸</span>
      <h2>Request Blood</h2>
      <p>Fill in the details below to request blood donation</p>
    </div>
    <form id="requestBloodForm" onsubmit="return submitRequestBloodForm()">
      <div class="floating-group">
        <select id="blood" required class="floating-input" onfocus="toggleFloatLabel(this)" onblur="toggleFloatLabel(this)" onchange="toggleFloatLabel(this)">
          <option value=""></option>
          <option value="A+">A+</option>
          <option value="A-">A-</option>
          <option value="B+">B+</option>
          <option value="B-">B-</option>
          <option value="O+">O+</option>
          <option value="O-">O-</option>
          <option value="AB+">AB+</option>
          <option value="AB-">AB-</option>
        </select>
        <label for="blood" class="floating-label request-label-space">Blood Group</label>
      </div>
      <br>
      <div style="display:flex; gap:12px;">
        <div class="floating-group" style="flex:1;">
          <input type="number" id="pincode" minlength="6" maxlength="6" pattern="\d{6}" required class="floating-input" min="100000" max="999999" oninput="this.value=this.value.replace(/[^0-9]/g,'').slice(0,6);toggleFloatLabel(this)" onfocus="toggleFloatLabel(this)" onblur="toggleFloatLabel(this)" autocomplete="off" />
          <label for="pincode" class="floating-label request-label-space">Pincode</label>
        </div>
        <div class="floating-group" style="flex:1;">
          <select id="city" required class="floating-input" onfocus="toggleFloatLabel(this)" onblur="toggleFloatLabel(this)" onchange="toggleFloatLabel(this)">
            <option value=""></option>
            <option value="Chennai">Chennai</option>
            <option value="Coimbatore">Coimbatore</option>
            <option value="Madurai">Madurai</option>
            <option value="Salem">Salem</option>
            <option value="Tiruchirappalli">Tiruchirappalli</option>
            <option value="Vellore">Vellore</option>
            <option value="Erode">Erode</option>
            <option value="Tiruppur">Tiruppur</option>
            <option value="Thoothukkudi">Thoothukkudi</option>
            <option value="Dindigul">Dindigul</option>
            <option value="Thanjavur">Thanjavur</option>
            <option value="Kanchipuram">Kanchipuram</option>
            <option value="Namakkal">Namakkal</option>
            <option value="Karur">Karur</option>
            <option value="Tirunelveli">Tirunelveli</option>
            <option value="Cuddalore">Cuddalore</option>
            <option value="Villupuram">Villupuram</option>
            <option value="Krishnagiri">Krishnagiri</option>
            <option value="Dharmapuri">Dharmapuri</option>
            <option value="Theni">Theni</option>
            <option value="Sivaganga">Sivaganga</option>
            <option value="Ramanathapuram">Ramanathapuram</option>
            <option value="Virudhunagar">Virudhunagar</option>
            <option value="Pudukkottai">Pudukkottai</option>
            <option value="Perambalur">Perambalur</option>
            <option value="Ariyalur">Ariyalur</option>
            <option value="Nagapattinam">Nagapattinam</option>
            <option value="Tiruvarur">Tiruvarur</option>
            <option value="Tiruvannamalai">Tiruvannamalai</option>
            <option value="Kancheepuram">Kancheepuram</option>
            <option value="Tiruvallur">Tiruvallur</option>
            <option value="Chengalpattu">Chengalpattu</option>
            <option value="Ranipet">Ranipet</option>
            <option value="Tirupathur">Tirupathur</option>
            <option value="Kallakurichi">Kallakurichi</option>
            <option value="Mayiladuthurai">Mayiladuthurai</option>
            <option value="Tenkasi">Tenkasi</option>
            <option value="Kanniyakumari">Kanniyakumari</option>
            <option value="Nilgiris">Nilgiris</option>
          </select>
          <label for="city" class="floating-label request-label-space">City</label>
        </div>
      </div>
      <br>
      <div class="floating-group">
        <select id="bloodTime" required class="floating-input" onfocus="toggleFloatLabel(this)" onblur="toggleFloatLabel(this)" onchange="toggleFloatLabel(this)">
          <option value=""></option>
          <option value="Immediate">Immediate (Within 1 hour)</option>
          <option value="Urgent">Urgent (Within 4 hours)</option>
          <option value="Today">Today</option>
          <option value="Tomorrow">Tomorrow</option>
          <option value="This Week">This Week</option>
        </select>
        <label for="bloodTime" class="floating-label request-label-space">Blood Needed Time</label>
      </div>
      <br>
      <button type="submit" class="submit-btn" >Submit Request</button>
    </form>
    <div id="requestResultsContainer" style="display:none;margin-top:24px;">
      <div style="background:#fff7f7;border:1.5px solid #fca5a5;padding:18px 20px 10px 20px;border-radius:12px;max-width:600px;margin:0 auto;">
        <div id="requestSummaryBox" style="display:none;margin-bottom:18px;"></div>
        <div class="form-header" style="margin-bottom:18px;">
          <span class="icon">ğŸ©¸</span>
          <h2 style="color:#dc2626;">Available Donors Nearby</h2>
          <p>Here are donors and organizations matching your request.</p>
        </div>
        <div id="requestDonors"></div>
        <div id="requestStatusBox" style="margin-top:24px;">
          <div style="background:#fff0f0;border:1.5px solid #fca5a5;padding:14px 16px;border-radius:10px;text-align:center;">
            <span class="icon" style="font-size:1.5rem;">ğŸ©¸</span>
            <h3 style="color:#dc2626;margin:8px 0 4px 0;font-size:1.15rem;">Matching Donors</h3>
            <p style="color:#991b1b;font-size:0.98rem;">We are matching your request with available donors. You will be notified as soon as a match is found.</p>
          </div>
        </div>
        <button onclick="closeRequestResult()" class="submit-btn" style="margin-top:24px;">Close</button>
      </div>
    </div>
  </section>

  <!-- Donate Blood Section -->
  <section id="donate" class="form-section" style="display:none;">
    <div class="form-header">
      <span class="icon">ğŸ©¸</span>
      <h2>Donate Blood</h2>
      <p>Fill in your details to become a donor</p>
    </div>
    <form id="donateBloodForm" onsubmit="return submitDonateBloodForm()">
      <div class="floating-group">
        <input id="donorName" type="text" class="floating-input" required placeholder=" " autocomplete="off">
        <label for="donorName" class="floating-label">Full Name</label>
        <div style="height:16px"></div>
      </div>
      <div style="display:flex; gap:12px;">
        <div class="floating-group" style="flex:1;">
          <input id="donorAge" type="number" min="18" max="65" class="floating-input" required placeholder=" " autocomplete="off">
          <label for="donorAge" class="floating-label">Age</label>
          <div style="height:16px"></div>
        </div>
        <div class="floating-group" style="flex:1;">
          <select id="donorGender" class="floating-input" required>
            <option value="" disabled selected hidden></option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
          <label for="donorGender" class="floating-label">Gender</label>
          <div style="height:16px"></div>
        </div>
        <div class="floating-group" style="flex:1;">
          <select id="donorBlood" class="floating-input" required>
            <option value="" disabled selected hidden></option>
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
          </select>
          <label for="donorBlood" class="floating-label">Blood Group</label>
          <div style="height:16px"></div>
        </div>
      </div>
      <div style="display:flex; gap:12px;">
        <div class="floating-group" style="flex:1;">
          <input id="donorCity" type="text" class="floating-input" required placeholder=" " autocomplete="off">
          <label for="donorCity" class="floating-label">City</label>
          <div style="height:16px"></div>
        </div>
        <div class="floating-group" style="flex:1;">
          <input id="donorPincode" type="text" class="floating-input" pattern="\d{6}" maxlength="6" minlength="6" required placeholder=" " autocomplete="off">
          <label for="donorPincode" class="floating-label">Pincode</label>
          <div style="height:16px"></div>
        </div>
      </div>
      <div class="floating-group">
        <input id="donorMobile" type="tel" class="floating-input" pattern="[0-9]{10}" maxlength="10" minlength="10" required placeholder=" " autocomplete="off">
        <label for="donorMobile" class="floating-label">Mobile No</label>
        <div style="height:16px"></div>
      </div>
      <div class="floating-group">
        <input id="donorEmail" type="email" class="floating-input" required placeholder=" " autocomplete="off">
        <label for="donorEmail" class="floating-label">Email</label>
        <div style="height:16px"></div>
      </div>
      <div class="floating-group">
        <select id="donorLastDonate" class="floating-input" required>
          <option value="" disabled selected hidden></option>
          <option value="Nil">Nil (New Donor)</option>
          <option value="<1 month">Less than 1 month ago</option>
          <option value="1-3 months">1-3 months ago</option>
          <option value=">3 months">More than 3 months ago</option>
        </select>
        <label for="donorLastDonate" class="floating-label">Last Date of Blood Donation</label>
        <div style="height:16px"></div>
      </div>
      <button type="submit" class="submit-btn">Submit</button>
    </form>
  </section>

  <!-- Donor Submission Result Section -->
  <section id="donorResultSection" class="form-section" style="display:none;">
    <div class="form-header">
      <span class="icon">ğŸ©¸</span>
      <h2>Thank You for Registering as a Donor!</h2>
      <p>Your details and nearby blood requests are shown below.</p>
    </div>
    <div id="donorSummary" style="margin-bottom:24px;"></div>
    <h3 style="color:#dc2626;">Nearby Blood Requests</h3>
    <div id="nearbyNeeders"></div>
    <div id="needersPagination" style="margin-top:16px;text-align:center;"></div>
    <button onclick="closeDonorResult()" class="submit-btn" style="margin-top:24px;">Close</button>
  </section>

  <!-- About Section -->
  <section id="about" class="about-section">
    <div class="about-container">
      <div class="about-header">
        <h2>ğŸ©¸ About SEVAGAN</h2>
        <p>Your Blood Donor Partner</p>
      </div>

      <div class="about-content">
        <div class="about-text">
          <h3>Our Mission</h3>
          <p>SEVAGAN is a life-saving digital platform built to connect voluntary blood donors with those in urgent need. Whether it's a medical emergency, surgery, or a rare blood type requirement â€“ SEVAGAN bridges the gap between donors and patients with just a few taps.</p>
          
          <p>Our mission is simple: <strong>To make blood donation faster, easier, and accessible for everyone.</strong></p>
          
          <p>We believe that every drop counts and that technology can make life-saving connections happen faster than ever before.</p>
        </div>

        <div class="about-text">
          <h3>ğŸ” Key Features</h3>
          <div class="features-grid">
            <div class="feature-card">
              <h4>âœ… Secure OTP-based Login</h4>
              <p>Via Email or Mobile for safe access</p>
            </div>
            <div class="feature-card">
              <h4>ğŸ“ Smart Search</h4>
              <p>By Blood Group, City & Pincode</p>
            </div>
            <div class="feature-card">
              <h4>ğŸ“’ Safe Donor Records</h4>
              <p>Storage in Excel/Database format</p>
            </div>
            <div class="feature-card">
              <h4>ğŸ›ï¸ Instant Alerts</h4>
              <p>Blood Request notifications</p>
            </div>
            <div class="feature-card">
              <h4>ğŸ”„ Donor Verification</h4>
              <p>Activity tracking and verification</p>
            </div>
            <div class="feature-card">
              <h4>ğŸ’» Cross-Platform</h4>
              <p>Works on mobile and desktop</p>
            </div>
          </div>
        </div>
      </div>

      <div class="mission-box">
        <h3>ğŸ’¡ Why SEVAGAN?</h3>
        <p>100% free to use â€¢ Designed for hospitals, individuals, and NGOs â€¢ Works smoothly on mobile and desktop â€¢ Made by students with a passion for saving lives through code</p>
      </div>

      <div class="why-sevagan">
        <h3>ğŸ”— Be a hero. Be a Sevagan.</h3>
        <p>Whether you're here to donate blood, request for help, or support the community, SEVAGAN is your trusted companion in every heartbeat.</p>
        
        <div class="benefits-list">
          <div class="benefit-item">
            <strong>ğŸ¥ Hospitals</strong>
            <p>Quick access to donors</p>
          </div>
          <div class="benefit-item">
            <strong>ğŸ‘¥ Individuals</strong>
            <p>Easy blood requests</p>
          </div>
          <div class="benefit-item">
            <strong>ğŸ¤ NGOs</strong>
            <p>Community support</p>
          </div>
          <div class="benefit-item">
            <strong>ğŸ’ Donors</strong>
            <p>Save lives easily</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Profile Modal -->
  <div id="profileModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:2000; align-items:center; justify-content:center;">
    <div style="background:#fff; border-radius:22px; max-width:410px; margin:80px auto; padding:0 0 32px 0; box-shadow:0 8px 32px rgba(0,0,0,0.18); position:relative; overflow:hidden; max-height:90vh; overflow-y:auto;">
      <div style="background:linear-gradient(90deg,#dc2626 60%,#b91c1c 100%);padding:28px 0 18px 0;text-align:center;position:relative;">
        <button id="profileEditIcon" onclick="setProfileEdit(true)" tabindex="0" aria-label="Edit Profile">
          <!-- Modern pencil SVG icon -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 17.25V21h3.75l11.06-11.06a1.5 1.5 0 0 0 0-2.12l-2.13-2.13a1.5 1.5 0 0 0-2.12 0L3 17.25z" fill="currentColor"/>
            <path d="M14.85 6.85l2.3 2.3" stroke="#dc2626" stroke-width="2" stroke-linecap="round"/>
            <rect x="2.5" y="16.5" width="5" height="1.5" rx="0.75" fill="#dc2626"/>
          </svg>
        </button>
        <button onclick="closeProfileModal()" style="position:absolute; top:18px; right:18px; background:none; border:none; font-size:1.5rem; color:#fff; cursor:pointer;">&times;</button>
        <div style="position:relative; display:inline-block; margin-bottom:10px;">
          <div class="avatar-edit-wrapper">
            <div id="profileAvatarContainer" style="width:90px;height:90px;border-radius:50%;border:3px solid #fff;background:#f3f3f3;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;box-shadow:0 2px 10px rgba(220,38,38,0.12);">
              <img id="profileImg" src="" alt="Profile" style="width:90px;height:90px;border-radius:50%;object-fit:cover;display:none;">
              <span id="profileInitials" style="font-size:2.5rem;color:#dc2626;font-weight:bold;user-select:none;"></span>
            </div>
          </div>
          <label for="profileImgInput" id="profileImgEdit" style="display:none;position:absolute;bottom:0;right:0;background:#fff;border-radius:50%;padding:4px;box-shadow:0 2px 6px rgba(0,0,0,0.1);cursor:pointer;border:1.5px solid #dc2626;">
            <svg width="20" height="20" fill="#dc2626" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75l11.06-11.06-3.75-3.75L3 17.25zm14.71-9.04a1.003 1.003 0 0 0 0-1.42l-2.5-2.5a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
            <input id="profileImgInput" type="file" accept="image/*" style="display:none" onchange="uploadProfileImg(event)">
          </label>
        </div>
        <span id="profileCancelIcon" onclick="closeProfileModal()" tabindex="0" title="Cancel Edit">
          <svg viewBox="0 0 24 24"><path d="M18.3 5.71a1 1 0 0 0-1.41 0L12 10.59 7.11 5.7A1 1 0 0 0 5.7 7.11L10.59 12l-4.89 4.89a1 1 0 1 0 1.41 1.41L12 13.41l4.89 4.89a1 1 0 0 0 1.41-1.41L13.41 12l4.89-4.89a1 1 0 0 0 0-1.4z"/></svg>
        </span>
        <h3 style="color:#fff; margin-bottom:0;letter-spacing:1px;font-size:1.35rem;">Your Profile</h3>
      </div>
      <div style="padding:24px 24px 0 24px;">
        <form id="profileForm" onsubmit="return saveProfile()" style="display:flex; flex-direction:column; gap:10px; align-items:center;">
          <div id="profileViewFields" style="width:100%;display:none;text-align:left;margin:0 auto 10px auto;">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px 18px;align-items:center;">
              <div style="color:#991b1b;font-weight:600;">Account Type:</div><div id="profileViewAccountType" style="color:#222;font-weight:500;"></div>
              <div class="profile-view-org" style="color:#991b1b;font-weight:600;">Organization Name:</div><div class="profile-view-org" id="profileViewOrgName" style="color:#222;font-weight:500;"></div>
              <div style="color:#991b1b;font-weight:600;">Name:</div><div id="profileViewName" style="color:#222;font-weight:500;"></div>
              <div style="color:#991b1b;font-weight:600;">Blood Group:</div><div id="profileViewBlood" style="color:#222;font-weight:500;"></div>
              <div style="color:#991b1b;font-weight:600;">Age:</div><div id="profileViewAge" style="color:#222;font-weight:500;"></div>
              <div style="color:#991b1b;font-weight:600;">Gender:</div><div id="profileViewGender" style="color:#222;font-weight:500;"></div>
              <div style="color:#991b1b;font-weight:600;">Mobile:</div><div id="profileViewMobile" style="color:#222;font-weight:500;"></div>
              <div style="color:#991b1b;font-weight:600;">City:</div><div id="profileViewCity" style="color:#222;font-weight:500;"></div>
              <div style="color:#991b1b;font-weight:600;">Pincode:</div><div id="profileViewPincode" style="color:#222;font-weight:500;"></div>
              <div class="profile-view-email" style="color:#991b1b;font-weight:600;">Email:</div><div class="profile-view-email" id="profileViewEmail" style="color:#222;font-weight:500;"></div>
            </div>
          </div>
          <div id="profileEditFields" style="width:100%;display:none;flex-direction:column;align-items:center;gap:18px;">
            <div class="floating-group">
              <input id="profileName" type="text" required class="floating-input" oninput="this.value=this.value.toUpperCase();toggleFloatLabel(this)" autocomplete="off">
              <label for="profileName" class="floating-label always-float">Name</label>
            </div>
            <div style="display: flex; gap: 12px;">
              <div class="floating-group" style="flex:1;">
                <input id="profileAge" type="number" min="1" max="120" required class="floating-input" autocomplete="off">
                <label for="profileAge" class="floating-label always-float">Age</label>
              </div>
              <div class="floating-group" style="flex:1;">
                <select id="profileGender" required class="floating-input">
                  <option value=""></option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Other">Other</option>
                </select>
                <label for="profileGender" class="floating-label always-float">Gender</label>
              </div>
            </div>
            <div class="floating-group" id="profileMobileGroup" style="width:90%;display:flex;flex-direction:column;">
              <div style="display:flex;flex-direction:row;gap:8px;width:100%;align-items:flex-end;">
                <div style="flex:0 0 110px;display:flex;flex-direction:column;position:relative;">
                  <label for="profileCountryCode" class="floating-label always-float">Region</label>
                  <select id="profileCountryCode" class="floating-input" style="min-width:90px;max-width:120px;">
                    <option value="+91">ğŸ‡®ğŸ‡³ +91</option>
                    <option value="+1">ğŸ‡ºğŸ‡¸ +1</option>
                    <option value="+44">ğŸ‡¬ğŸ‡§ +44</option>
                    <option value="+61">ğŸ‡¦ğŸ‡º +61</option>
                    <option value="+971">ğŸ‡¦ğŸ‡ª +971</option>
                    <option value="+81">ğŸ‡¯ğŸ‡µ +81</option>
                    <option value="+49">ğŸ‡©ğŸ‡ª +49</option>
                    <option value="+33">ğŸ‡«ğŸ‡· +33</option>
                    <option value="+39">ğŸ‡®ğŸ‡¹ +39</option>
                    <option value="+7">ğŸ‡·ğŸ‡º +7</option>
                    <option value="+86">ğŸ‡¨ğŸ‡³ +86</option>
                    <option value="+82">ğŸ‡°ğŸ‡· +82</option>
                    <option value="+34">ğŸ‡ªğŸ‡¸ +34</option>
                    <option value="+55">ğŸ‡§ğŸ‡· +55</option>
                    <option value="+880">ğŸ‡§ğŸ‡© +880</option>
                    <option value="+92">ğŸ‡µğŸ‡° +92</option>
                    <option value="+966">ğŸ‡¸ğŸ‡¦ +966</option>
                    <option value="+20">ğŸ‡ªğŸ‡¬ +20</option>
                    <option value="+62">ğŸ‡®ğŸ‡© +62</option>
                    <option value="+63">ğŸ‡µğŸ‡­ +63</option>
                    <option value="+60">ğŸ‡²ğŸ‡¾ +60</option>
                    <option value="+65">ğŸ‡¸ğŸ‡¬ +65</option>
                    <option value="+94">ğŸ‡±ğŸ‡° +94</option>
                    <option value="+254">ğŸ‡°ğŸ‡ª +254</option>
                    <option value="+27">ğŸ‡¿ğŸ‡¦ +27</option>
                    <option value="+234">ğŸ‡³ğŸ‡¬ +234</option>
                    <option value="+212">ğŸ‡²ğŸ‡¦ +212</option>
                    <option value="+380">ğŸ‡ºğŸ‡¦ +380</option>
                    <option value="+351">ğŸ‡µğŸ‡¹ +351</option>
                    <option value="+90">ğŸ‡¹ğŸ‡· +90</option>
                    <option value="+98">ğŸ‡®ğŸ‡· +98</option>
                    <option value="+964">ğŸ‡®ğŸ‡¶ +964</option>
                    <option value="+84">ğŸ‡»ğŸ‡³ +84</option>
                    <option value="+66">ğŸ‡¹ğŸ‡­ +66</option>
                    <option value="+855">ğŸ‡°ğŸ‡­ +855</option>
                    <option value="+95">ğŸ‡²ğŸ‡² +95</option>
                    <option value="+977">ğŸ‡³ğŸ‡µ +977</option>
                    <option value="+7">ğŸ‡°ğŸ‡¿ +7</option>
                    <option value="+994">ğŸ‡¦ğŸ‡¿ +994</option>
                    <option value="+373">ğŸ‡²ğŸ‡© +373</option>
                    <option value="+961">ğŸ‡±ğŸ‡§ +961</option>
                    <option value="+962">ğŸ‡¯ğŸ‡´ +962</option>
                    <option value="+965">ğŸ‡°ğŸ‡¼ +965</option>
                    <option value="+968">ğŸ‡´ğŸ‡² +968</option>
                    <option value="+974">ğŸ‡¶ğŸ‡¦ +974</option>
                    <option value="+973">ğŸ‡§ğŸ‡­ +973</option>
                    <option value="+972">ğŸ‡®ğŸ‡± +972</option>
                    <option value="+963">ğŸ‡¸ğŸ‡¾ +963</option>
                    <option value="+967">ğŸ‡¾ğŸ‡ª +967</option>
                    <option value="+975">ğŸ‡§ğŸ‡¹ +975</option>
                    <option value="+976">ğŸ‡²ğŸ‡³ +976</option>
                    <option value="+992">ğŸ‡¹ğŸ‡¯ +992</option>
                    <option value="+993">ğŸ‡¹ğŸ‡² +993</option>
                    <option value="+995">ğŸ‡¬ğŸ‡ª +995</option>
                    <option value="+996">ğŸ‡°ğŸ‡¬ +996</option>
                    <option value="+998">ğŸ‡ºğŸ‡¿ +998</option>
                    <option value="+1-242">ğŸ‡§ğŸ‡¸ +1-242</option>
                    <option value="+1-246">ğŸ‡§ğŸ‡§ +1-246</option>
                    <option value="+1-264">ğŸ‡¦ğŸ‡® +1-264</option>
                    <option value="+1-268">ğŸ‡¦ğŸ‡¬ +1-268</option>
                    <option value="+1-284">ğŸ‡»ğŸ‡¬ +1-284</option>
                    <option value="+1-340">ğŸ‡»ğŸ‡® +1-340</option>
                    <option value="+1-345">ğŸ‡°ğŸ‡¾ +1-345</option>
                    <option value="+1-441">ğŸ‡§ğŸ‡² +1-441</option>
                    <option value="+1-473">ğŸ‡¬ğŸ‡© +1-473</option>
                    <option value="+1-649">ğŸ‡¹ğŸ‡¨ +1-649</option>
                    <option value="+1-664">ğŸ‡²ğŸ‡¸ +1-664</option>
                    <option value="+1-670">ğŸ‡²ğŸ‡µ +1-670</option>
                    <option value="+1-671">ğŸ‡¬ğŸ‡º +1-671</option>
                    <option value="+1-684">ğŸ‡¦ğŸ‡¸ +1-684</option>
                    <option value="+1-721">ğŸ‡¸ğŸ‡½ +1-721</option>
                    <option value="+1-758">ğŸ‡±ğŸ‡¨ +1-758</option>
                    <option value="+1-767">ğŸ‡©ğŸ‡² +1-767</option>
                    <option value="+1-784">ğŸ‡»ğŸ‡¨ +1-784</option>
                    <option value="+1-809">ğŸ‡©ğŸ‡´ +1-809</option>
                    <option value="+1-868">ğŸ‡¹ğŸ‡¹ +1-868</option>
                    <option value="+1-869">ğŸ‡°ğŸ‡³ +1-869</option>
                    <option value="+1-876">ğŸ‡¯ğŸ‡² +1-876</option>
                    <option value="+1242">ğŸ‡§ğŸ‡¸ +1242</option>
                    <option value="+1246">ğŸ‡§ğŸ‡§ +1246</option>
                    <option value="+1264">ğŸ‡¦ğŸ‡® +1264</option>
                    <option value="+1268">ğŸ‡¦ğŸ‡¬ +1268</option>
                    <option value="+1284">ğŸ‡»ğŸ‡¬ +1284</option>
                    <option value="+1340">ğŸ‡»ğŸ‡® +1340</option>
                    <option value="+1345">ğŸ‡°ğŸ‡¾ +1345</option>
                    <option value="+1441">ğŸ‡§ğŸ‡² +1441</option>
                    <option value="+1473">ğŸ‡¬ğŸ‡© +1473</option>
                    <option value="+1649">ğŸ‡¹ğŸ‡¨ +1649</option>
                    <option value="+1664">ğŸ‡²ğŸ‡¸ +1664</option>
                    <option value="+1670">ğŸ‡²ğŸ‡µ +1670</option>
                    <option value="+1671">ğŸ‡¬ğŸ‡º +1671</option>
                    <option value="+1684">ğŸ‡¦ğŸ‡¸ +1684</option>
                    <option value="+1721">ğŸ‡¸ğŸ‡½ +1721</option>
                    <option value="+1758">ğŸ‡±ğŸ‡¨ +1758</option>
                    <option value="+1767">ğŸ‡©ğŸ‡² +1767</option>
                    <option value="+1784">ğŸ‡»ğŸ‡¨ +1784</option>
                    <option value="+1809">ğŸ‡©ğŸ‡´ +1809</option>
                    <option value="+1868">ğŸ‡¹ğŸ‡¹ +1868</option>
                    <option value="+1869">ğŸ‡°ğŸ‡³ +1869</option>
                    <option value="+1876">ğŸ‡¯ğŸ‡² +1876</option>
                    <!-- Add more countries as needed -->
                  </select>
                </div>
                <div style="flex:1 1 0%;display:flex;flex-direction:column;position:relative;">
                  <label for="profileMobile" class="floating-label always-float">Mobile No</label>
                  <input id="profileMobile" type="tel" pattern="[0-9]{10}" maxlength="10" minlength="10" required class="floating-input" style="width:100%;margin-top:0;" oninput="this.value=this.value.replace(/[^0-9]/g,'').slice(0,10);" autocomplete="off">
                </div>
              </div>
            </div>
            <div style="display: flex; gap: 12px;">
              <div class="floating-group" style="flex:1;">
                <select id="profileCity" required class="floating-input">
                  <option value=""></option>
                  <option value="Chennai">Chennai</option>
                  <option value="Coimbatore">Coimbatore</option>
                  <option value="Madurai">Madurai</option>
                  <option value="Salem">Salem</option>
                  <option value="Tiruchirappalli">Tiruchirappalli</option>
                  <option value="Vellore">Vellore</option>
                  <option value="Erode">Erode</option>
                  <option value="Tiruppur">Tiruppur</option>
                  <option value="Thoothukkudi">Thoothukkudi</option>
                  <option value="Dindigul">Dindigul</option>
                  <option value="Thanjavur">Thanjavur</option>
                  <option value="Kanchipuram">Kanchipuram</option>
                  <option value="Namakkal">Namakkal</option>
                  <option value="Karur">Karur</option>
                  <option value="Tirunelveli">Tirunelveli</option>
                  <option value="Cuddalore">Cuddalore</option>
                  <option value="Villupuram">Villupuram</option>
                  <option value="Krishnagiri">Krishnagiri</option>
                  <option value="Dharmapuri">Dharmapuri</option>
                  <option value="Theni">Theni</option>
                  <option value="Sivaganga">Sivaganga</option>
                  <option value="Ramanathapuram">Ramanathapuram</option>
                  <option value="Virudhunagar">Virudhunagar</option>
                  <option value="Pudukkottai">Pudukkottai</option>
                  <option value="Perambalur">Perambalur</option>
                  <option value="Ariyalur">Ariyalur</option>
                  <option value="Nagapattinam">Nagapattinam</option>
                  <option value="Tiruvarur">Tiruvarur</option>
                  <option value="Tiruvannamalai">Tiruvannamalai</option>
                  <option value="Kancheepuram">Kancheepuram</option>
                  <option value="Tiruvallur">Tiruvallur</option>
                  <option value="Chengalpattu">Chengalpattu</option>
                  <option value="Ranipet">Ranipet</option>
                  <option value="Tirupathur">Tirupathur</option>
                  <option value="Kallakurichi">Kallakurichi</option>
                  <option value="Mayiladuthurai">Mayiladuthurai</option>
                  <option value="Tenkasi">Tenkasi</option>
                  <option value="Kanniyakumari">Kanniyakumari</option>
                  <option value="Nilgiris">Nilgiris</option>
                </select>
                <label for="profileCity" class="floating-label always-float">City</label>
              </div>
              <div class="floating-group" style="flex:1;">
                <input id="profilePincode" type="text" minlength="6" maxlength="6" pattern="\d{6}" required class="floating-input" style="width:100%;" oninput="this.value=this.value.replace(/[^0-9]/g,'').slice(0,6);" autocomplete="off">
                <label for="profilePincode" class="floating-label always-float">Pincode</label>
              </div>
            </div>
            <div class="floating-group">
              <select id="profileBlood" required class="floating-input">
                <option value=""></option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
              </select>
              <label for="profileBlood" class="floating-label always-float">Blood Group</label>
            </div>
            <div class="floating-group">
              <div class="input-suffix-wrapper">
                <input id="profileEmailUser" type="text" required class="floating-input with-suffix" style="width:100%;" autocomplete="off">
                <label for="profileEmailUser" class="floating-label always-float">Email</label>
                <span class="input-suffix">@gmail.com</span>
              </div>
            </div>
            <div class="floating-group">
              <select id="profileUserType" class="floating-select" required value="" onchange="this.classList.toggle('filled', this.value !== ''); showProfileOrgFields();">
                <option value="" disabled selected hidden></option>
                <option value="Individual">Individual</option>
                <option value="NGO">NGO</option>
                <option value="Hospital">Hospital</option>
              </select>
              <label for="profileUserType" class="floating-label">Account Type</label>
            </div>
            <div class="floating-group" id="profileOrgNameGroup" style="display:none;">
              <input type="text" id="profileOrgName" class="floating-input" placeholder=" " autocomplete="off" style="text-transform:uppercase;" oninput="this.value=this.value.toUpperCase();" />
              <label for="profileOrgName" class="floating-label" id="profileOrgNameLabel">Organization Name</label>
            </div>
            <div class="floating-group" id="profileEmailGroup" style="display:none;">
              <div class="input-suffix-wrapper">
                <input type="text" id="profileEmailUser" class="floating-input with-suffix" placeholder=" " autocomplete="off" />
                <label for="profileEmailUser" class="floating-label">Email</label>
                <span class="input-suffix">@gmail.com</span>
              </div>
            </div>
          </div>
          <button id="profileSaveBtn" type="submit" style="margin-top:18px;background:#dc2626;color:#fff;padding:10px 32px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;display:none;font-size:1.08rem;letter-spacing:1px;">Save</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Status Section -->
  <section id="statusSection" class="form-section" style="display:none;">
    <div class="form-header">
      <span class="icon">ğŸ©¸</span>
      <h2>Request Status</h2>
      <p>Your blood request is being processed. We will notify you when a donor is found.</p>
    </div>
  </section>

  <!-- JavaScript for validation and navigation -->
  <script>
    function validateForm() {
      const blood = document.getElementById('blood').value;
      const city = document.getElementById('city').value;
      const bloodTime = document.getElementById('bloodTime').value;
      const pincode = document.getElementById('pincode').value;
      if (!blood || !city || !bloodTime || !pincode) {
        alert("All fields are required.");
        return false;
      }
      if (!/^\d{6}$/.test(pincode)) {
        alert("Please enter a valid 6-digit pincode.");
        return false;
      }
      alert("Blood request submitted successfully! We'll connect you with donors soon.");
      return true;
    }

    function toggleMenu() {
      const navLinks = document.getElementById('navLinks');
      navLinks.classList.toggle('active');
    }

    // Navbar active state
    function setActiveNav(sectionId) {
      document.querySelectorAll('.nav-links a').forEach(a => {
        if (a.getAttribute('data-section') === sectionId) {
          a.classList.add('active');
        } else {
          a.classList.remove('active');
        }
      });
    }

    function scrollToSection(sectionId) {
      if (sectionId === 'formSection') {
        showForm();
      } else if (sectionId === 'home') {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else if (sectionId === 'about') {
        document.getElementById('about').scrollIntoView({ behavior: 'smooth' });
        document.getElementById('about').style.display = 'block';
        setActiveNav('about');
      } else if (sectionId === 'donate') {
        showDonateBloodSection();
      } else if (sectionId === 'statusSection') {
        showStatusSection();
      } else {
        // For other sections, you can add more functionality later
        alert('This section is coming soon!');
      }
    }

    function showForm() {
      document.getElementById('formSection').style.display = 'block';
      document.getElementById('formSection').scrollIntoView({ behavior: 'smooth' });
      setActiveNav('formSection');
    }

    function showDonateBloodSection() {
      document.getElementById('donate').style.display = 'block';
      document.getElementById('donate').scrollIntoView({ behavior: 'smooth' });
      setActiveNav('donate');
      // Prefill from profile if available
      const get = id => localStorage.getItem('profile'+id) || '';
      document.getElementById('donorName').value = get('Name');
      document.getElementById('donorAge').value = get('Age');
      // For select fields, set value if present
      const gender = get('Gender');
      if (gender) document.getElementById('donorGender').value = gender;
      const blood = get('Blood');
      if (blood) document.getElementById('donorBlood').value = blood;
      document.getElementById('donorCity').value = get('City');
      document.getElementById('donorPincode').value = get('Pincode');
      document.getElementById('donorMobile').value = get('Mobile');
      const emailUser = get('EmailUser');
      document.getElementById('donorEmail').value = emailUser ? (emailUser + '@gmail.com') : '';
    }

    function showProfileModal() {
      loadProfileFromStorage();
      document.getElementById('profileModal').style.display = 'flex';
      // Prefill from localStorage if available
      const fields = ['Name','Age','Gender','Mobile','City','Pincode','Blood','EmailUser','CountryCode'];
      fields.forEach(f => {
        const el = document.getElementById('profile'+f);
        if(el && localStorage.getItem('profile'+f)) el.value = localStorage.getItem('profile'+f);
      });
      // Profile image or initials
      const img = localStorage.getItem('profileImg');
      const name = document.getElementById('profileName').value || localStorage.getItem('profileName') || '';
      const initials = name.split(' ').map(w=>w[0]).join('').slice(0,2).toUpperCase();
      const imgEl = document.getElementById('profileImg');
      const initialsEl = document.getElementById('profileInitials');
      if(img) {
        imgEl.src = img;
        imgEl.style.display = 'block';
        initialsEl.style.display = 'none';
      } else {
        imgEl.style.display = 'none';
        initialsEl.textContent = initials || '?';
        initialsEl.style.display = 'flex';
      }
      setProfileEdit(false);
      showProfileView();
    }
    function closeProfileModal() {
      document.getElementById('profileModal').style.display = 'none';
    }
    function showProfileView() {
      // Fill view fields
      const get = id => document.getElementById('profile'+id) ? document.getElementById('profile'+id).value : localStorage.getItem('profile'+id) || '';
      document.getElementById('profileViewName').textContent = get('Name');
      document.getElementById('profileViewAge').textContent = get('Age');
      document.getElementById('profileViewGender').textContent = get('Gender');
      document.getElementById('profileViewMobile').textContent = (get('CountryCode')||'+91') + ' ' + get('Mobile');
      document.getElementById('profileViewCity').textContent = get('City');
      document.getElementById('profileViewPincode').textContent = get('Pincode');
      document.getElementById('profileViewBlood').textContent = get('Blood');
      // Show full email
      const emailUser = get('EmailUser');
      document.getElementById('profileViewEmail').textContent = emailUser ? (emailUser + '@gmail.com') : '';
      document.getElementById('profileViewFields').style.display = 'block';
      document.getElementById('profileEditFields').style.display = 'none';
    }
    function setProfileEdit(edit) {
      const fields = ['Name','Age','Gender','Mobile','City','Pincode','Blood','EmailUser','CountryCode'];
      fields.forEach(f => {
        const el = document.getElementById('profile'+f);
        if(el) el.disabled = !edit;
      });
      document.getElementById('profileSaveBtn').style.display = edit ? 'block' : 'none';
      document.getElementById('profileEditIcon').style.display = edit ? 'none' : 'inline-block';
      document.getElementById('profileImgEdit').style.display = edit ? 'block' : 'none';
      document.getElementById('profileViewFields').style.display = edit ? 'none' : 'block';
      document.getElementById('profileEditFields').style.display = edit ? 'flex' : 'none';
    }
    function uploadProfileImg(event) {
      const file = event.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('profileImg').src = e.target.result;
        localStorage.setItem('profileImg', e.target.result);
      };
      reader.readAsDataURL(file);
    }
    function saveProfile() {
      const fields = ['Name','Age','Gender','Mobile','City','Pincode','Blood','EmailUser','CountryCode'];
      let valid = true;
      fields.forEach(f => {
        const el = document.getElementById('profile'+f);
        if(!el.value) valid = false;
      });
      if(!valid) { alert('Please fill all fields.'); return false; }
      // Validate pincode
      const pincode = document.getElementById('profilePincode').value;
      if(!/^\d{6}$/.test(pincode)) { alert('Please enter a valid 6-digit pincode.'); return false; }
      // Validate mobile
      const mobile = document.getElementById('profileMobile').value;
      if(!/^\d{10}$/.test(mobile)) { alert('Please enter a valid 10-digit mobile number.'); return false; }
      // Name in caps
      document.getElementById('profileName').value = document.getElementById('profileName').value.toUpperCase();
      // Save only the username part for email
      localStorage.setItem('profileEmailUser', document.getElementById('profileEmailUser').value);
      // Save other fields
      fields.filter(f => f !== 'EmailUser').forEach(f => {
        localStorage.setItem('profile'+f, document.getElementById('profile'+f).value);
      });
      alert('Profile saved!');
      setProfileEdit(false);
      showProfileView();
      closeProfileModal();
      // After saving, update the view fields with the latest values
      const userType = document.getElementById('profileUserType').value;
      const orgName = document.getElementById('profileOrgName').value.toUpperCase();
      const name = document.getElementById('profileName').value;
      const gender = document.getElementById('profileGender').value;
      const age = document.getElementById('profileAge').value;
      const blood = document.getElementById('profileBlood').value;
      const city = document.getElementById('profileCity').value;
      const pincodeProfile = document.getElementById('profilePincode').value;
      const region = document.getElementById('profileCountryCode').value;
      const mobileProfile = document.getElementById('profileMobile').value;
      const emailUser = document.getElementById('profileEmailUser').value;
      // Save to localStorage
      const profileData = { accountType: userType, orgName, name, gender, age, blood, city, pincode: pincodeProfile, region, mobile: mobileProfile, emailUser };
      localStorage.setItem('profileData', JSON.stringify(profileData));
      document.getElementById('profileViewAccountType').textContent = userType;
      document.getElementById('profileViewName').textContent = name;
      document.getElementById('profileViewAge').textContent = age;
      document.getElementById('profileViewGender').textContent = gender;
      document.getElementById('profileViewMobile').textContent = mobileProfile;
      document.getElementById('profileViewCity').textContent = city;
      document.getElementById('profileViewPincode').textContent = pincodeProfile;
      document.getElementById('profileViewBlood').textContent = blood;
      // Show/hide org/email fields based on account type
      const orgFields = document.querySelectorAll('.profile-view-org');
      const emailFields = document.querySelectorAll('.profile-view-email');
      if (userType === 'NGO' || userType === 'Hospital') {
        orgFields.forEach(f => f.style.display = 'block');
        emailFields.forEach(f => f.style.display = 'block');
        document.getElementById('profileViewOrgName').textContent = orgName;
        document.getElementById('profileViewEmail').textContent = emailUser + '@gmail.com';
      } else {
        orgFields.forEach(f => f.style.display = 'none');
        emailFields.forEach(f => f.style.display = 'none');
        document.getElementById('profileViewOrgName').textContent = '';
        document.getElementById('profileViewEmail').textContent = '';
      }
      setProfileEdit(false);
      return false; // Prevent form submission
    }

    let allNeeders = [];
    let needersPage = 1;
    const NEEDERS_PER_PAGE = 5;
    function renderNeedersPage(page) {
      const start = (page-1)*NEEDERS_PER_PAGE;
      const end = start + NEEDERS_PER_PAGE;
      const pageNeeders = allNeeders.slice(start, end);
      let needersHtml = '';
      pageNeeders.forEach(n => {
        if(n.type==='individual') {
          needersHtml += `<div style='background:#fff7f7;border:1px solid #fca5a5;padding:12px 14px;border-radius:8px;margin-bottom:10px;'>` +
            `<b>Name:</b> ${n.name}<br>` +
            `<b>Age:</b> ${n.age}<br>` +
            `<b>Gender:</b> ${n.gender}<br>` +
            `<b>City:</b> ${n.city}<br>` +
            `<b>Pincode:</b> ${n.pincode}<br>` +
            `<b>Mobile:</b> <a href='tel:${n.mobile}' style='color:#dc2626;text-decoration:underline;'>${n.mobile} <span style='font-size:1.1em;'>&#128222;</span></a>` +
          `</div>`;
        } else {
          needersHtml += `<div style='background:#fff7f7;border:1px solid #fca5a5;padding:12px 14px;border-radius:8px;margin-bottom:10px;'>` +
            `<b>${n.type==='ngo' ? 'NGO' : 'Hospital'} Name:</b> ${n.ngoName}<br>` +
            `<b>City:</b> ${n.city}<br>` +
            `<b>Pincode:</b> ${n.pincode}<br>` +
            `<b>Mobile:</b> <a href='tel:${n.mobile}' style='color:#dc2626;text-decoration:underline;'>${n.mobile} <span style='font-size:1.1em;'>&#128222;</span></a>` +
          `</div>`;
        }
      });
      document.getElementById('nearbyNeeders').innerHTML = needersHtml;
      // Pagination controls
      const totalPages = Math.ceil(allNeeders.length / NEEDERS_PER_PAGE);
      let pagHtml = '';
      if (totalPages > 1) {
        pagHtml += `<button onclick='changeNeedersPage(${page-1})' ${page===1?'disabled':''} style='margin-right:8px;padding:6px 16px;border-radius:6px;border:none;background:#fca5a5;color:#991b1b;font-weight:bold;cursor:pointer;'>Previous</button>`;
        pagHtml += `<span style='font-weight:bold;color:#dc2626;'>Page ${page} of ${totalPages}</span>`;
        pagHtml += `<button onclick='changeNeedersPage(${page+1})' ${page===totalPages?'disabled':''} style='margin-left:8px;padding:6px 16px;border-radius:6px;border:none;background:#fca5a5;color:#991b1b;font-weight:bold;cursor:pointer;'>Next</button>`;
      }
      document.getElementById('needersPagination').innerHTML = pagHtml;
    }
    function changeNeedersPage(page) {
      const totalPages = Math.ceil(allNeeders.length / NEEDERS_PER_PAGE);
      if(page < 1 || page > totalPages) return;
      needersPage = page;
      renderNeedersPage(needersPage);
    }
    function submitDonateBloodForm() {
      // Gather donor details
      const donor = {
        name: document.getElementById('donorName').value,
        age: document.getElementById('donorAge').value,
        gender: document.getElementById('donorGender').value,
        blood: document.getElementById('donorBlood').value,
        city: document.getElementById('donorCity').value,
        pincode: document.getElementById('donorPincode').value,
        mobile: document.getElementById('donorMobile').value,
        email: document.getElementById('donorEmail').value,
        lastDonate: document.getElementById('donorLastDonate').value
      };
      // Show donor summary
      let summaryHtml = `<div style='background:#fef2f2;padding:16px 18px;border-radius:10px;margin-bottom:10px;'>` +
        `<b>Name:</b> ${donor.name}<br>` +
        `<b>Age:</b> ${donor.age}<br>` +
        `<b>Gender:</b> ${donor.gender}<br>` +
        `<b>Blood Group:</b> ${donor.blood}<br>` +
        `<b>City:</b> ${donor.city}<br>` +
        `<b>Pincode:</b> ${donor.pincode}<br>` +
        `<b>Mobile:</b> <a href='tel:${donor.mobile}' style='color:#dc2626;text-decoration:underline;'>${donor.mobile}</a><br>` +
        `<b>Email:</b> ${donor.email}<br>` +
        `<b>Last Donation:</b> ${donor.lastDonate}</div>`;
      document.getElementById('donorSummary').innerHTML = summaryHtml;
      // Mock nearby needers data (add more for demo)
      allNeeders = [
        {type:'individual', name:'Rahul Kumar', age:32, gender:'Male', mobile:'9876543210', city:'Chennai', pincode:'600001'},
        {type:'ngo', ngoName:'Red Cross NGO', mobile:'9123456789', city:'Chennai', pincode:'600002'},
        {type:'hospital', ngoName:'Apollo Hospital', mobile:'9000000000', city:'Chennai', pincode:'600003'},
        {type:'individual', name:'Priya S', age:27, gender:'Female', mobile:'9988776655', city:'Chennai', pincode:'600004'},
        {type:'individual', name:'Suresh Babu', age:45, gender:'Male', mobile:'9876512345', city:'Chennai', pincode:'600005'},
        {type:'ngo', ngoName:'Life Savers NGO', mobile:'9112233445', city:'Chennai', pincode:'600006'},
        {type:'hospital', ngoName:'Global Hospital', mobile:'9000011111', city:'Chennai', pincode:'600007'},
        {type:'individual', name:'Anita R', age:29, gender:'Female', mobile:'9876509876', city:'Chennai', pincode:'600008'}
      ];
      // Filter needers by donor's city or pincode
      const filteredNeeders = allNeeders.filter(n => n.city === donor.city || n.pincode === donor.pincode);
      needersPage = 1;
      renderFilteredNeedersPage(filteredNeeders, needersPage);
      // Show result section, hide form
      document.getElementById('donateBloodForm').reset();
      document.getElementById('donate').style.display = 'none';
      document.getElementById('donorResultSection').style.display = 'block';
      document.getElementById('donorResultSection').scrollIntoView({behavior:'smooth'});
      // Show status box below donor results
      // document.getElementById('donorStatusBox').style.display = 'block'; // <-- Remove or comment out this line
      return false;
    }
    // Render only filtered needers with call icon
    function renderFilteredNeedersPage(filtered, page) {
      const NEEDERS_PER_PAGE = 5;
      if (filtered.length === 0) {
        document.getElementById('nearbyNeeders').innerHTML = "<div style='background:#fff7f7;border:1px solid #fca5a5;padding:16px;border-radius:8px;text-align:center;'>No nearby blood requests found matching your city or pincode.</div>";
        document.getElementById('needersPagination').innerHTML = '';
        return;
      }
      const start = (page-1)*NEEDERS_PER_PAGE;
      const end = start + NEEDERS_PER_PAGE;
      const pageNeeders = filtered.slice(start, end);
      let needersHtml = '';
      pageNeeders.forEach(n => {
        let callIcon = `<a href='tel:${n.mobile}' title='Call' style='margin-left:8px;vertical-align:middle;display:inline-block;'><svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' fill='none' viewBox='0 0 24 24'><path fill='#dc2626' d='M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 011 1V20a1 1 0 01-1 1C10.07 21 3 13.93 3 5a1 1 0 011-1h3.5a1 1 0 011 1c0 1.25.2 2.46.57 3.58a1 1 0 01-.24 1.01l-2.2 2.2z'/></svg></a>`;
        if(n.type==='individual') {
          needersHtml += `<div style='background:#fff7f7;border:1px solid #fca5a5;padding:12px 14px;border-radius:8px;margin-bottom:10px;'>` +
            `<b>Name:</b> ${n.name}<br>` +
            `<b>Age:</b> ${n.age}<br>` +
            `<b>Gender:</b> ${n.gender}<br>` +
            `<b>City:</b> ${n.city}<br>` +
            `<b>Pincode:</b> ${n.pincode}<br>` +
            `<b>Mobile:</b> ${n.mobile} ${callIcon}` +
          `</div>`;
        } else {
          needersHtml += `<div style='background:#fff7f7;border:1px solid #fca5a5;padding:12px 14px;border-radius:8px;margin-bottom:10px;'>` +
            `<b>${n.type==='ngo' ? 'NGO' : 'Hospital'} Name:</b> ${n.ngoName}<br>` +
            `<b>City:</b> ${n.city}<br>` +
            `<b>Pincode:</b> ${n.pincode}<br>` +
            `<b>Mobile:</b> ${n.mobile} ${callIcon}` +
          `</div>`;
        }
      });
      document.getElementById('nearbyNeeders').innerHTML = needersHtml;
      // Pagination controls
      const totalPages = Math.ceil(filtered.length / NEEDERS_PER_PAGE);
      let pagHtml = '';
      if (totalPages > 1) {
        pagHtml += `<button onclick='changeFilteredNeedersPage(${page-1})' ${page===1?'disabled':''} style='margin-right:8px;padding:6px 16px;border-radius:6px;border:none;background:#fca5a5;color:#991b1b;font-weight:bold;cursor:pointer;'>Previous</button>`;
        pagHtml += `<span style='font-weight:bold;color:#dc2626;'>Page ${page} of ${totalPages}</span>`;
        pagHtml += `<button onclick='changeFilteredNeedersPage(${page+1})' ${page===totalPages?'disabled':''} style='margin-left:8px;padding:6px 16px;border-radius:6px;border:none;background:#fca5a5;color:#991b1b;font-weight:bold;cursor:pointer;'>Next</button>`;
      }
      document.getElementById('needersPagination').innerHTML = pagHtml;
      // Store for pagination
      window._filteredNeeders = filtered;
    }
    function changeFilteredNeedersPage(page) {
      const filtered = window._filteredNeeders || [];
      const NEEDERS_PER_PAGE = 5;
      const totalPages = Math.ceil(filtered.length / NEEDERS_PER_PAGE);
      if(page < 1 || page > totalPages) return;
      needersPage = page;
      renderFilteredNeedersPage(filtered, needersPage);
    }
    function closeDonorResult() {
      document.getElementById('donorResultSection').style.display = 'none';
      setActiveNav('home');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Close menu when clicking outside
    document.addEventListener('click', function(event) {
      const navLinks = document.getElementById('navLinks');
      const hamburger = document.querySelector('.hamburger');
      
      if (!navLinks.contains(event.target) && !hamburger.contains(event.target)) {
        navLinks.classList.remove('active');
      }
    });

    // Floating label for Last Date of Blood Donation select in Donate Blood form
    function updateDonateFloatingSelects() {
      var lastDonate = document.getElementById('donorLastDonate');
      if (lastDonate) {
        if (lastDonate.value && lastDonate.value !== "") {
          lastDonate.classList.add('filled');
        } else {
          lastDonate.classList.remove('filled');
        }
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      var lastDonate = document.getElementById('donorLastDonate');
      if (lastDonate) {
        lastDonate.addEventListener('change', updateDonateFloatingSelects);
        lastDonate.addEventListener('blur', updateDonateFloatingSelects);
        updateDonateFloatingSelects();
      }
      setActiveNav('home');
    });

    // Scrollspy: highlight nav link for section in view
    const sectionIds = ['home', 'formSection', 'donate', 'about', 'statusSection'];
    window.addEventListener('scroll', function() {
      let currentSection = 'home';
      // If statusSection is visible, always set as active
      const statusSection = document.getElementById('statusSection');
      if (statusSection && statusSection.style.display !== 'none') {
        setActiveNav('statusSection');
        return;
      }
      // Otherwise, check other sections in reverse order
      for (const id of sectionIds.slice().reverse()) {
        const section = document.getElementById(id);
        if (section && section.style.display !== 'none') {
          const rect = section.getBoundingClientRect();
          if (rect.top <= 80 && rect.bottom > 80) {
            currentSection = id;
            break;
          }
        }
      }
      setActiveNav(currentSection);
    });

    function submitRequestBloodForm() {
      // Gather request details
      const city = document.getElementById('city').value;
      const pincode = document.getElementById('pincode').value;
      const blood = document.getElementById('blood').value;
      const bloodTime = document.getElementById('bloodTime').value;
      // Replace results container with status box only
      const statusHtml = `
        <div style="background:#fff7f7;border:1.5px solid #fca5a5;padding:32px 24px 24px 24px;border-radius:14px;max-width:500px;margin:32px auto 0 auto;text-align:center;">
          <span class="icon" style="font-size:2.2rem;">ğŸ©¸</span>
          <h2 style="color:#dc2626;margin:18px 0 10px 0;">Request Status</h2>
          <p style="color:#991b1b;font-size:1.08rem;">We are matching your request with available donors. You will be notified as soon as a match is found.</p>
        </div>`;
      const container = document.getElementById('requestResultsContainer');
      container.innerHTML = statusHtml;
      container.style.display = 'block';
      container.scrollIntoView({behavior:'smooth'});
      return false;
    }
    function closeRequestResult() {
      document.getElementById('requestResultsContainer').style.display = 'none';
      setActiveNav('home');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Status tooltip hover logic
    const statusNavLink = document.getElementById('statusNavLink');
    const statusTooltip = document.getElementById('statusTooltip');
    if (statusNavLink && statusTooltip) {
      statusNavLink.addEventListener('mouseenter', function() {
        statusTooltip.style.display = 'block';
      });
      statusNavLink.addEventListener('mouseleave', function() {
        statusTooltip.style.display = 'none';
      });
    }

    function showStatusSection() {
      // Hide all main sections
      var sectionIdsToHide = ['formSection', 'donate', 'about', 'statusSection'];
      sectionIdsToHide.forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.style.display = 'none';
      });
      // Show only the Status section
      var statusSection = document.getElementById('statusSection');
      if (statusSection) statusSection.style.display = 'block';
      setActiveNav('statusSection');
      statusSection.scrollIntoView({ behavior: 'smooth' });
    }

    function showProfileOrgFields() {
      const userType = document.getElementById('profileUserType').value;
      const orgGroup = document.getElementById('profileOrgNameGroup');
      const orgLabel = document.getElementById('profileOrgNameLabel');
      const orgInput = document.getElementById('profileOrgName');
      const emailGroup = document.getElementById('profileEmailGroup');
      const emailInput = document.getElementById('profileEmailUser');
      if (userType === 'NGO') {
        orgGroup.style.display = '';
        orgLabel.textContent = 'NGO Name';
        orgInput.required = true;
        emailGroup.style.display = '';
        emailInput.required = true;
      } else if (userType === 'Hospital') {
        orgGroup.style.display = '';
        orgLabel.textContent = 'Hospital Name';
        orgInput.required = true;
        emailGroup.style.display = '';
        emailInput.required = true;
      } else {
        orgGroup.style.display = 'none';
        orgInput.required = false;
        orgInput.value = '';
        emailGroup.style.display = 'none';
        emailInput.required = false;
        emailInput.value = '';
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      // ... existing code ...
      showProfileOrgFields();
    });

    function loadProfileFromStorage() {
      const data = JSON.parse(localStorage.getItem('profileData') || '{}');
      if (!data) return;
      if (data.accountType) document.getElementById('profileUserType').value = data.accountType;
      if (data.orgName) document.getElementById('profileOrgName').value = data.orgName.toUpperCase();
      if (data.name) document.getElementById('profileName').value = data.name;
      if (data.gender) document.getElementById('profileGender').value = data.gender;
      if (data.age) document.getElementById('profileAge').value = data.age;
      if (data.blood) document.getElementById('profileBlood').value = data.blood;
      if (data.city) document.getElementById('profileCity').value = data.city;
      if (data.pincode) document.getElementById('profilePincode').value = data.pincode;
      if (data.region) document.getElementById('profileCountryCode').value = data.region;
      if (data.mobile) document.getElementById('profileMobile').value = data.mobile;
      if (data.emailUser) document.getElementById('profileEmailUser').value = data.emailUser;
    }
  </script>

</body>

</html> 
